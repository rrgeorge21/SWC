mw.loader.using(['jquery.cookie']).then(function(){if(window.SpoilersToggleLoaded){return;}window.SpoilersToggleLoaded=!0;var cookie_id='splr_';function removeCookie(key){setCookie(key);}function setCookie(key,value){if(value=="undefined"||value=="null")value=null;$.cookie(cookie_id+key,value,{expires:150,path:'/'});}function getCookie(key){return $.cookie(cookie_id+key);}function toggleSpoilers($content,original){if($content.is(mw.util.$content)&&!original){return;}$content.find('.sp_banner').click(function(){var id=$(this).parent().attr('class').match(/sp_id_[\d\w]+/)[0].split('sp_id_')[1],$wrn=$content.find('.sp_id_'+id+' .sp_wrn'),$txt=$content.find('.sp_id_'+id+' .sp_txt');if($wrn.css('display')=='none'){$wrn.fadeIn(200,function(){$(this).show(200);});$txt.hide(0);setCookie(id,'hide');}else{$wrn.fadeOut(200,function(){$(this).hide(200);});$txt.delay(200).show(0);setCookie(id,'show');}});var sp_on_page={};$content.find('.sp').each(function(){var id=$(this).attr('class').match(
/sp_id_[\d\w]+/)[0].split('sp_id_')[1];sp_on_page[id]=undefined;});for(var id in sp_on_page){if(getCookie(id)==='show'){$content.find('.sp_id_'+id+' .sp_wrn').hide(0);$content.find('.sp_id_'+id+' .sp_txt').show(0);}else if(getCookie(id)==='hide'){$content.find('.sp_id_'+id+' .sp_wrn').show(0);$content.find('.sp_id_'+id+' .sp_txt').hide(0);}else if($('.sp_id_'+id+' .sp_wrn').attr('display')=='none'){$content.find('.sp_id_'+id+' .sp_wrn').hide(0);$content.find('.sp_id_'+id+' .sp_txt').show(0);}else{$content.find('.sp_id_'+id+' .sp_wrn').show(0);$content.find('.sp_id_'+id+' .sp_txt').hide(0);}}}toggleSpoilers(mw.util.$content,true);mw.hook('wikipage.content').add(toggleSpoilers);});;function strPad(n){return String("00"+n).slice(-2);}function updateContent(content,isMod,canBlock,arr){for(var i=arr._embedded["doc:posts"].length-1;i>-1;i--){var text=arr._embedded["doc:posts"][i].rawContent,user=arr._embedded["doc:posts"][i].createdBy.name,userId=arr._embedded["doc:posts"][i].createdBy.id,
epoch=arr._embedded["doc:posts"][i].creationDate.epochSecond,postID=arr._embedded["doc:posts"][i].id,threadID=arr._embedded["doc:posts"][i].threadId,isReported=Boolean(arr._embedded["doc:posts"][i].isReported),forumName=arr._embedded["doc:posts"][i].forumName,dt=new Date(epoch*1000),formattedDate=strPad(dt.getHours())+":"+strPad(dt.getMinutes())+":"+strPad(dt.getSeconds());var spanDate=document.createElement("span"),spanDateText=document.createTextNode(formattedDate+" — ");spanDate.className="df-date";spanDate.appendChild(spanDateText);var aMessage=document.createElement("a"),aMessageText=document.createTextNode(text);aMessage.className="df-content";aMessage.href=mw.config.get('wgScriptPath')+"/f/p/"+threadID;aMessage.target="_blank";aMessage.appendChild(aMessageText);var aUser=document.createElement("a"),aUserText=document.createTextNode(" — "+user);aUser.className="df-user";aUser.href=mw.config.get('wgScriptPath')+"/f/u/"+userId;aUser.target="_blank";aUser.appendChild(aUserText);
var spanCategory=document.createElement("span"),spanCategoryText=document.createTextNode(" in "+forumName);spanCategory.className="df-category";spanCategory.appendChild(spanCategoryText);if(canBlock){var aBlock=document.createElement("a"),aBlockText=document.createTextNode(" (block)");aBlock.className="df-block";aBlock.href=mw.util.getUrl("Special:Block/")+user;aBlock.target="_blank";aBlock.appendChild(aBlockText);}var par=document.createElement("p");par.className="df-entry";if(isReported){par.className+=" df-reported";}par.appendChild(spanDate);par.appendChild(aMessage);par.appendChild(aUser);par.appendChild(spanCategory);if(canBlock){par.appendChild(aBlock);}content.insertBefore(par,content.firstChild);}}function updateFeed(content,isMod,canBlock,epoch){var rcLimit=50,dt=new Date(epoch*1000+1),request=new XMLHttpRequest();request.onreadystatechange=function(){if(request.readyState==4){switch(request.status){case 200:var arr=JSON.parse(request.responseText);updateContent(content,isMod
,canBlock,arr);if(arr._embedded["doc:posts"].length>0){epoch=arr._embedded["doc:posts"][0].creationDate.epochSecond;}break;default:setTimeout(updateFeed,120000,content,isMod,canBlock,epoch);}}};request.open("GET","https://services.fandom.com/discussion/"+wgCityId+"/posts?limit="+rcLimit+"&since="+dt.toISOString()+"&page=0&responseGroup=small&reported=false&viewableOnly="+(!isMod).toString(),true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function initFeed(content,isMod,canBlock){var rcLimit=50,request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){content.innerHTML="Unable to load discussions: The service is down or is not enabled for this domain.";};request.onreadystatechange=function(){if(request.readyState==4){switch(request.status){case 200:var arr=JSON.parse(request.responseText);content.innerHTML='';updateContent(content,isMod,canBlock,arr);var epoch=arr._embedded["doc:posts"][0].creationDate.
epochSecond;setTimeout(updateFeed,120000,content,isMod,canBlock,epoch);break;case 404:content.innerHTML='There are no posts.';break;default:content.innerHTML="Unable to load discussions: The service is down or is not enabled for this domain.";}}};request.open("GET","https://services.fandom.com/discussion/"+wgCityId+"/posts?limit="+rcLimit+"&page=0&responseGroup=small&reported=false&viewableOnly="+(!isMod).toString(),true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function createDiscussionsFeed(){if(wgNamespaceNumber==-1&&wgTitle=="DiscussionsFeed"){document.title='Discussions Feed - '+wgSiteName;var canBlock=Boolean(wgUserGroups.indexOf('sysop')>-1||wgUserGroups.indexOf('staff')>-1||wgUserGroups.indexOf('helper')>-1||wgUserGroups.indexOf('vstf')>-1||wgUserGroups.indexOf('global-discussions-moderator')>-1),isMod=Boolean(canBlock||wgUserGroups.indexOf('threadmoderator')>-1);if(window.skin=="oasis"){document.getElementById(
"PageHeader").getElementsByTagName("h1")[0].textContent="Discussions Feed";}else if(window.skin=="monobook"){document.getElementById("firstHeading").textContent="Discussions Feed";}var content=document.getElementById("mw-content-text");content.innerHTML='Loading feed... <img src="https://images.wikia.nocookie.net/wlb/images/7/74/WIP.gif" /></div>';initFeed(content,isMod,canBlock);}}{var j=-1;for(var i=0;i<onloadFuncts.length&&j<0;i++){if(onloadFuncts[i].name=="createDiscussionsFeed"){j=i;}}if(j<0){addOnloadHook(createDiscussionsFeed);}};require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';window.dev=window.dev||{};var scriptPath=mw.config.get('wgScriptPath');if(window.discussionsModuleLoaded||(!$('.wds-community-header a[href="'+scriptPath+'/f"]').exists()&&mw.config.get('wgEditorExtraButtons')===null)){return;}window.discussionsModuleLoaded=!0;window.dev.discussionsModule={};var config=window.discussionsModuleConfig||{},embed=window.discussionsModuleEmbed||!1
,options={};options.mostrecent=function(k){var b=Boolean(k).toString();return b;};options.size=function(k){if([3,4,5,6].indexOf(k)>-1){return k;}};options.catid=function(k){var c=k.join().replace(/\s/g,'');return c;};$.each(config,function(k,v){if(!options.hasOwnProperty(k)){delete config[k];}else if(typeof options[k](k)==='undefined'){delete config[k];}else{config[k]=options[k](k);}});importArticle({type:'style',article:'u:dev:MediaWiki:DiscussionsRailModule.css'});(mw.util.addCSS('.skin-oasis .discussions-rail-theme .embeddable-discussions-module .embeddable-discussions-title {'+'color: '+mw.config.get('wgSassParams')['color-links']+';'+'}'+'.skin-oasis .discussions-rail-theme .embeddable-discussions-module .avatar-container,'+'.skin-oasis .discussions-rail-theme .wds-avatar-stack .wds-avatar__image {'+'border: 2px solid '+$('.wds-community-header .wds-dropdown__content').css('border-left-color')+';'+'}')).ownerNode.id='discussionsModuleStyles';function init(){window.dev.
discussionsModule=new DiscussionsModule();}function DiscussionsModule(){mw.hook('dev.i18n').add($.proxy(this.i18n.handler,this));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});this.data.fetch.done($.proxy(this.data.async,this));$.when(this.i18n.$loaded,this.data.$loaded).done($.proxy(this.init,this));}$.extend(DiscussionsModule.prototype,{$rail:$('#WikiaRail'),$module:$('<section>',{'class':'discussions-rail-theme rail-module'}),moduleText:mw.html.element('discussions',config)});DiscussionsModule.prototype.init=function(){mw.hook('discussionsModule.ui').add($.proxy(this.ui.module,this)).add($.proxy(this.ui.load,this));mw.hook('wikipage.content').add($.proxy(this.ui.content,this));mw.hook('discussionsModule.loaded').add($.proxy(this.ui.posts,this));if(!embed&&this.$rail.exists()){this.api=new mw.Api();this.api.get({action:'parse',disablepp:!0,text:this.moduleText}).done($.proxy(this.call,this));}};DiscussionsModule.prototype.call=function(d){if(d.error){
return;}this.$module.html(d.parse.text['*'].replace(/<\/?p>|module\s/g,''));if(this.$rail.hasClass('loaded')){$.proxy(this.rail,this)();}else{this.$rail.on('afterLoad.rail',$.proxy(this.rail,this));}};DiscussionsModule.prototype.rail=function(){if($('.activity-module').length){this.$rail.find('.activity-module:first').after(this.$module);}else if($('.rail-sticky-module').length){this.$module.insertBefore(this.$rail.find('.rail-sticky-module'));}else{this.$rail.append(this.$module);}mw.hook('discussionsModule.ui').fire(this.$module);mw.hook('discussionsModule.added').fire(this.$module);if(this.threadCount<(config.size||4)){var $threads=this.$module.find('.embeddable-discussions-threads'),truncUrl=$threads.attr('data-requesturl').replace(/(limit=)(\d)/,'$1'+this.threadCount);$threads.attr('data-requesturl',truncUrl);}mw.hook('wikipage.content').fire(this.$module);};DiscussionsModule.prototype.ui={};DiscussionsModule.prototype.ui.content=function($content){var $modules=$content.find(
'.discussions-rail-theme');$modules.each(function(i,el){var $el=$(el);mw.hook('discussionsModule.ui').fire($el);});};DiscussionsModule.prototype.ui.module=function($module){$module.find('.embeddable-discussions-module').removeClass('module');$module.find('.embeddable-discussions-show-all a[href^="'+scriptPath+'/f"]').addClass('wds-button wds-is-secondary');$module.find('.embeddable-discussions-show-all').append(this.ui.$stack.clone());$module.find('.embeddable-discussions-heading').attr('data-title',this.i18n.msg('title').plain());};DiscussionsModule.prototype.ui.posts=function($module){$module.find('.embeddable-discussions-post-detail').each($.proxy(function(i,$post){$title=$post.find('.embeddable-discussions-title'),user=$post.find('.avatar-username').text(),defaultPostTitle=this.i18n.msg('post-by',user).plain();if($title.text().length===0){$title.html(defaultPostTitle);}},this));};DiscussionsModule.prototype.ui.load=function($module){var $threads=$module.find(
'.embeddable-discussions-threads'),thready=new MutationObserver(function(){if(!$.contains($module,$('.wikiaThrobber'))){mw.hook('discussionsModule.loaded').fire($module);thready.disconnect();}});if($threads.exists()){thready.observe($threads[0],{childList:!0});}};DiscussionsModule.prototype.ui.$stack=$('<div>',{'class':'wds-avatar-stack'});DiscussionsModule.prototype.i18n={};DiscussionsModule.prototype.i18n.handler=function(i18no){i18no.loadMessages('DiscussionsRailModule').done($.proxy(this.i18n.store,this));};DiscussionsModule.prototype.i18n.store=function(i18n){$.extend(this.i18n,i18n);this.i18n.$loaded.resolve();};DiscussionsModule.prototype.i18n.$loaded=$.Deferred();DiscussionsModule.prototype.data={};DiscussionsModule.prototype.data.fetch=$.get(mw.config.get('wgDiscussionsApiUrl')+'/'+mw.config.get('wgCityId')+'/'+'threads');DiscussionsModule.prototype.data.async=function(d){if(!d._embedded.threads.length){return;}this.threadCount=d._embedded.threads.length;$.proxy(this.data.ui
,this)(d._embedded.contributors[0].userInfo.splice(0,5));};DiscussionsModule.prototype.data.ui=function(stackData){this.ui.$stack.html(stackData.map(function(u){return $('<a>',{href:mw.util.getUrl('User:'+u.name),'class':'wds-avatar',title:u.name,html:typeof u.avatarUrl==='string'?$('<img>',{'class':'wds-avatar__image','src':u.avatarUrl.indexOf('messaging')>-1?u.avatarUrl+'/revision/latest/scale-to-width-down/60':u.avatarUrl.replace('/scale-to-width-down/100','')+'/scale-to-width-down/60'}).prop('outerHTML'):$('<div>',{'class':'wds-avatar__image embeddable-discussions-default-avatar'}).prop('outerHTML')}).prop('outerHTML');}).join(''));this.data.$loaded.resolve();};DiscussionsModule.prototype.data.$loaded=$.Deferred();mw.loader.using('mediawiki.api').then(init);});;require(['jquery','mw','wikia.window'],function($,mw,window){if(mw.config.get('wgUserName')||$('#MyStory').exists()||window.myStoryLoaded){return;}window.myStoryLoaded=!0;importArticles({type:'style',articles:[
'u:dev:MediaWiki:FandomIcons.css','u:dev:MediaWiki:MyStory.css']});$.ajax({url:'https://dev.fandom.com/api.php',data:{action:'query',meta:'allmessages',ammessages:'Custom-MyStory',format:'json'},dataType:'jsonp',success:function(data){var myStory=JSON.parse(data.query.allmessages[0]["*"]);var _keys=Object.keys(myStory);window.myStoryUser=_keys[Math.floor(Math.random()*_keys.length)];window.myStoryMessage=myStory[window.myStoryUser];$.getJSON('/api/v1/User/Details/avatar',{ids:window.myStoryUser,size:50}).then(function(data){window.myStoryAvatar=data.items[0].avatar;$('<section>',{'class':'rail-module',id:'mystory'}).append($('<h2>',{text:'My Fandom Story'}).prepend($('<span>',{'class':'fandom-icons',text:'💙'})),$('<div>',{'class':'wds-avatar',title:window.myStoryUser}).prepend($('<img>',{src:window.myStoryAvatar,alt:window.myStoryUser,'class':'wds-avatar__image'})),$('<div>').append($('<a>',{href:mw.util.getUrl('User:'+window.myStoryUser),'class':'wds-midlight-aqua',text:window.
myStoryUser.replace(/_/g,' ')})),$('<div>',{'class':'mystory--content'}).append(window.myStoryMessage).append($('<div>',{'class':'mystory--link'}).append($('<a>',{href:'https://bit.ly/fandom-signin',html:'Create an account to start<br />your experience today!'})))).prependTo('#WikiaRail');});}});});;window.dev=window.dev||{};dev.ReferencePopups=dev.ReferencePopups||{};dev.ReferencePopups.unload=dev.ReferencePopups.unload||function(){"use strict";delete this.Popup;delete this.configure;if(this.unloadCore){this.unloadCore();}};(function(module,lang){"use strict";var i18n={en:{coreConfigureText:'Configure Reference Popups',coreConfigureHover:'Change settings for Reference Popups'},ar:{coreConfigureText:'اضبط تلميحات المراجع',coreConfigureHover:'اضبط إعدادات تلميح المراجع'},be:{coreConfigureText:'Налада усплываючых падказак',coreConfigureHover:'Змяніць налады усплываючых падказак'},ca:{
coreConfigureText:'Configura referències emergents',coreConfigureHover:'Canviar la configuració de referències emergents'},de:{coreConfigureText:'Referenz-Popups konfigurieren',coreConfigureHover:'Einstellungsänderungen für Referenz-Popups'},es:{coreConfigureText:'Configurar popups de referencias',coreConfigureHover:'Modificar la configuración de los popups de referencias'},fr:{coreConfigureText:'Configurer Popups de Référence',coreConfigureHover:'Modifier les préférences pour les Popups de Référence'},it:{coreConfigureText:'Configura le note a popup',coreConfigureHover:'Cambia le impostazioni per le note a popup'},ja:{coreConfigureText:'注釈ふきだしの設定',coreConfigureHover:'注釈ふきだしの設定を変更する'},ko:{coreConfigureText:'주석 말풍선 설정',coreConfigureHover:'주석 말풍선 설정하기'},nl:{coreConfigureText:'Configureer Referentie Popups',coreConfigureHover:'Wijzig de instellingen voor Referentie Popups'},pl:{coreConfigureText:
'Skonfiguruj wyskakujące przypisy',coreConfigureHover:'Zmień ustawienia dla wyskakujących przypisów'},'pt-br':{coreConfigureText:'Configurar Popups de Referência',coreConfigureHover:'Mudar configurações para Popups de Referência'},ro:{coreConfigureText:'Configurați popupurile de referință',coreConfigureHover:'Schimbă setările pentru popupurile de referință'},ru:{coreConfigureText:'Настройка всплывающих подсказок',coreConfigureHover:'Изменить настройки всплывающих подсказок'},tr:{coreConfigureText:'Referans Bildirimlerini Yapılandır',coreConfigureHover:'Referans Bildirimleri\'nin seçeneklerini değiştir'},uk:{coreConfigureText:'Налаштування спливаючих підказок',coreConfigureHover:'Змінити налаштування спливаючих підказок'},vi:{coreConfigureText:'Thiết Đặt Popup Tham Khảo',coreConfigureHover:
'Thay đổi thiết đặt cho Popup Tham Khảo'},zh:{coreConfigureText:'设定参考资料弹窗',coreConfigureHover:'更改参考弹出窗口的设置'},'zh-hk':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'},'zh-tw':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'}};var msg=module.messages=module.messages||{};for(var m in i18n.en){msg[m]=msg[m]||(i18n[lang]&&i18n[lang][m])||i18n.en[m];}})(dev.ReferencePopups,mediaWiki.config.get('wgUserLanguage'));(function(window,$,mw){"use strict";var module=window.dev.ReferencePopups;if(module.Popup){return $.noop;}var mwReady=$.Deferred(),mwDeps=['jquery.ui.position','jquery.effects.fold','jquery.ui.core','jquery.ui.widget'];mw.loader.load(mwDeps,null,true);mw.loader.using(mwDeps,mwReady.resolve,mwReady.reject);var colors=window.dev.colors||$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:
'u:dev:Colors/code.js'},dataType:'script',cache:!0});if(!module.cssLoaded){window.importArticle({type:'style',article:'u:dev:MediaWiki:ReferencePopups.css'});module.cssLoaded=!0;}var dfd=$.Deferred();module.Popup=dfd.promise();return function(callback){$.when(mwReady,colors).done(function(){dfd.resolve(module.Popup=callback(module,window,$,mw,window.dev.colors));}).fail(function(){delete module.Popup;dfd.reject();});};}(window,jQuery,mediaWiki))(function(module,window,$,mw,Colors){"use strict";$.curCSS=$.curCSS||$.css;(function(color,Colors,mw,$){function ifOk(val,alt){return(val&&val!=='transparent'&&val!=='rgba(0, 0, 0, 0)')?val:alt;}function tryParse(val,alt){try{return Colors.parse(val);}catch(e){if(window.console){window.console.warn('Colors Parse Error ('+val+'): ',e,e.stack);}return Colors.parse(alt);}}function toRgba(color,alpha){return'rgba('+color.red()+','+color.green()+','+color.blue()+','+alpha+')';}if(mw.config.get('skin')==='oasis'){color.page=Colors.parse(Colors.
wikia.page);color.pageBorder=Colors.parse(Colors.wikia.border);color.accent=Colors.parse(Colors.wikia.menu);color.popText=Colors.wikia.text;}else{var $content=$('#content');color.page=tryParse(ifOk($('#globalWrapper').css('backgroundColor'),$content.css('backgroundColor')),'white');color.pageBorder=tryParse(ifOk($content.css('borderLeftColor'),$content.css('borderRightColor')),'#AAA');color.accent=tryParse(ifOk($('#footer').css('borderTopColor'),$('body').css('backgroundColor')),'#fabd23');color.popText=tryParse($('#mw-content-text').css('color'),'black');}var mixCol;if(color.page.isBright()){color.back=color.page.mix(mixCol='black',95).mix('blue',97);}else{color.back=color.page.mix(mixCol='white',95);}color.popEdge=color.accent.mix(color.pageBorder,90);color.backA=toRgba(color.back,0.95);color.backB=toRgba(color.back.mix(mixCol,99),0.95);color.backC=toRgba(color.back.mix(mixCol,97),0.95);Colors.css(
'\
	.refpopups-box {\
		background-color: $back;\
		color: $popText;\
		border-color: $popEdge;\
		background: -webkit-linear-gradient(30deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
		background: linear-gradient(60deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
	}\
	.refpopups-chevron-in {\
		border-top-color: $back;\
		border-top-color: $backA;\
	}\
	.refpopups-flipped > .refpopups-chevron-in {\
		border-bottom-color: $back;\
		border-bottom-color: $backA;\
	}\
	.refpopups-chevron-out {\
		border-top-color: $popEdge;\
	}\
	.refpopups-flipped > .refpopups-chevron-out {\
		border-bottom-color: $popEdge;\
	}',color);})(module.colors=module.colors||{},Colors,mw,$);var widgetId=0;$.widget('Lunarity.referencePopup',{options:{activateBy:'hover',hoverDelay:200,content:'',disabled:!1,visible:!1,animation:'fold',animSpeed:300,context:null
,escapeCloses:!0,extraClass:'',contentBoxClass:'',stickyHover:!1,open:null,close:null},_create:function(){if(!this.document){this.document=$(this.element[0].ownerDocument);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);this.eventNamespace='.'+this.widgetBaseClass+widgetId++;}this._timeouts={};this._$popup=$('<div class="refpopups-popup" id="'+this.eventNamespace.substr(1)+'">'+'<div class="refpopups-chevron-out"></div>'+'<div class="refpopups-chevron-in"></div>'+'<div class="refpopups-box">'+'</div></div>').addClass(this.options.extraClass).find('> .refpopups-box').addClass(this.options.contentBoxClass).end();this.options.context=$(this.document.find(this.options.context)[0]);if(!this.options.context.length){this.options.context=$(this.document[0].body);}this._setOption('activateBy',this.options.activateBy==='click'?'click':'hover');this._updateContent();if(!this.options.disabled){this.options.disabled=!0;this.enable();}if(this.options.visible){this.
options.visible=!1;this.show();}},_clearTimeout:function(name){if(this._timeouts[name]!==null){window.clearTimeout(this._timeouts[name]);this._timeouts[name]=null;}},_setTimeout:function(name,callback,delay){this._clearTimeout(name);var me=this;this._timeouts[name]=window.setTimeout(function(){me._timeouts[name]=null;callback.call(me);},delay||0);},_installEvents:function(){var self=this,map,ns=this.eventNamespace;this._$popup.off(ns);this.element.off(ns);this._clearTimeout('open');this._clearTimeout('close');if(this.options.disabled){return;}if(this.options.activateBy==='hover'){map={};map['mouseenter'+ns]=function(){self._clearTimeout('close');};map['mouseleave'+ns]=function(ev){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);};this._$popup.on(map);map={};map['mouseenter'+ns]=function(ev){self._clearTimeout('close');self._setTimeout('open',function(){this.show(ev);},self.options.hoverDelay);};map['mouseleave'+ns]=function(ev){self._clearTimeout('open')
;if(!self.options.stickyHover){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);}};this.element.on(map);}var lastTouch;map={};map['touchEnd'+ns]=function(ev){lastTouch=ev.originalEvent;};map['click'+ns]=function(ev){if((self.options.activateBy!=='click'&&(!lastTouch||lastTouch.defaultPrevented))||self.options.disabled){return;}lastTouch=null;if(!self.options.visible){ev.preventDefault();self.show(ev);}else{self.hide(ev);}};if(this.options.escapeCloses){var onKeyUp=function(ev){if(ev.which===$.ui.keyCode.ESCAPE){self.hide(ev);}};map['keyup'+ns]=onKeyUp;this._$popup.on('keyup'+ns,onKeyUp);}this.element.on(map);map=null;},triggerHover:function(event){if(this.options.activateBy==='hover'){this._setTimeout('open',function(){this.show(event);},this.options.hoverDelay);}},destroy:function(){this.hide();this._$popup.remove();this.element.off(this.eventNamespace);return $.Widget.prototype.destroy.call(this);},_updateContent:function(val){val=val||this.options.content
||'';if(!val.jquery&&!val.nodeType){this.options.content=val=$($(this.document[0].createElement('div')).html(val).contents().unwrap());}this._$popup.find('> .refpopups-box').empty().append(val);},_describeAria:function(yes){var k='aria-describedby',val=this.element.attr(k),s=val?val.split(/\s+/g):[],id=this._$popup[0].id,at=$.inArray(id,s);if(at!==-1){if(!yes){s.splice(at,1);}}else if(yes){s.push(id);}val=s.join(' ');this.element[val?'attr':'removeAttr'](k,val);},show:function(event){if(this.options.visible||this.options.disabled){return;}this.options.context.append(this._$popup.stop(true,true));this._positionPopup();this._describeAria(true);if(this.options.animation){this._$popup.hide().show(this.options.animation,this.options.animSpeed);}var triggered=0,self=this,ns=this.eventNamespace;this.window.on('scroll'+ns+' resize'+ns,function adaptCallback(){if(++triggered!==1){return;}self._positionPopup();window.setTimeout(function(){var t=triggered;triggered=0;if(t>1&&self.options.visible)
{adaptCallback();}},100);});if(this.options.activateBy==='click'){this.document.on('click'+ns,function(ev){if(!$(ev.target).closest(self._$popup.add(self.element)).length){self.hide();}});}this.options.visible=!0;this._trigger('open',event);},hide:function(event){if(!this.options.visible){return;}this.document.off(this.eventNamespace);this.window.off(this.eventNamespace);if(this.options.animation){var $clone=this._$popup.clone();this._$popup.after($clone);$clone.hide(this.options.animation,this.options.animSpeed,function(){$clone.remove();});}this._$popup.detach();this._describeAria(false);this.options.visible=!1;this._trigger('close',event);},toggle:function(yesno){yesno=(yesno!==void 0?yesno:!this.options.visible);this[yesno?'show':'hide']();},_setOption:function(key,val){switch(key){case'disabled':if(val&&this.options.visible){this.hide();}this.options.disabled=!!val;this._installEvents();return;case'visible':this[val?'show':'hide']();return;case'activateBy':if(({hover:1,click:
1})[val]===1){this.options.activateBy=val;this._installEvents();}return;case'content':this.options.content=val;this._updateContent();return;case'context':return;case'extraClass':this._$popup[0].className='refpopups-popup';this._$popup.addClass(val);break;case'extraBoxClass':this._$popup.find('> .refpopups-box').prop('className','refpopups-box').addClass(val);break;}return $.Widget.prototype._setOption.call(this,key,val);},_positionPopup:function(){var $popup=this._$popup.removeClass('refpopups-flipped'),$this=this.element,$chevOut=$popup.find('> .refpopups-chevron-out'),chevOutHeight=0;if($chevOut.is(':visible')){chevOutHeight=$chevOut.position().top+$chevOut.outerHeight()-$popup.outerHeight();}$popup.position({my:'bottom',at:'top',of:$this,collision:'fit none',offset:'0 -'+chevOutHeight});var spaceAtTop=$this.offset().top,spaceAtBottom=spaceAtTop+$this[0].offsetHeight,popupHeight=$popup[0].offsetHeight+chevOutHeight,scroll=this.window.scrollTop();spaceAtTop=spaceAtTop-scroll;
spaceAtBottom=(scroll+this.window.height())-spaceAtBottom;if(spaceAtTop<popupHeight&&spaceAtTop<spaceAtBottom){$popup.addClass('refpopups-flipped').position({my:'top',at:'bottom',of:$this,collision:'fit none',offset:'0 '+chevOutHeight});}if(!chevOutHeight){return;}var $chevIn=$popup.find('> .refpopups-chevron-in'),myLoc=$this.offset().left-$popup.offset().left+$this.outerWidth()/2;$chevOut.css('left',(myLoc-$chevOut.outerWidth()/2)+'px');$chevIn.css('left',(myLoc-$chevIn.outerWidth()/2)+'px');}});return $.Lunarity.referencePopup;});(function(window,$){"use strict";var module=window.dev.ReferencePopups;if(module.unloadCore){return $.noop;}module.unloadCore=$.noop;return function(callback){$.when(module.Popup).done(function(){callback(module,window,$,window.mediaWiki);}).fail(function(){delete module.unloadCore;});};}(window,jQuery))(function(module,window,$,mw){"use strict";var store={get:function(key){try{return JSON.parse(window.localStorage.getItem(key));}catch(e){return null;}},set:
function(key,data){try{window.localStorage.setItem(key,JSON.stringify(data));}catch(e){}}};var userConfig=(function(config,defaults){if(typeof(config)!=='object'||config===null){config={};}if(({hover:1,click:1})[config.react]!==1){config.react='hover';}config.hoverDelay=config.hoverDelay||defaults.hoverDelay||200;config.animate=(config.animate===void 0?defaults.animate===void 0||defaults.animate:!!config.animate);config.disabled=!!config.disabled&&!module.lockdown;config.stick=(config.stick===void 0?defaults.stick!==void 0&&defaults.stick:!!config.stick);return config;})(store.get('RefPopupsJS'),module.defaults||{});var armedPop=null,openPop=null;function cyclePopup(newTarget){if(openPop&&openPop.element.is(newTarget)){return;}if(armedPop){if(armedPop.element.is(newTarget)){return;}armedPop.destroy();}return(armedPop=constructPopup($(newTarget)));}function cleanupPopups(){if(openPop){openPop.destroy();}if(armedPop){armedPop.destroy();}openPop=armedPop=null;}$(function($){var lastTouch;
$('#mw-content-text').on({'touchEnd.RefPopups':function(ev){lastTouch=ev.originalEvent;},'click.RefPopups':function(ev){if(((!lastTouch||lastTouch.defaultPrevented)&&userConfig.react!=='click')||userConfig.disabled){return;}lastTouch=null;var pop=cyclePopup(this);if(pop){ev.preventDefault();pop.show(ev);}},'referencepopupopen.RefPopups':function(){if(!armedPop||!armedPop.element.is(this)){return;}var oldOpen=openPop;openPop=armedPop;armedPop=null;if(oldOpen){oldOpen.destroy();}},'referencepopupclose.RefPopups':function(){if(!openPop||!openPop.element.is(this)){return;}if(armedPop){openPop.destroy();}else{armedPop=openPop;}openPop=null;}},'.reference');$(window).on('pagehide.RefPopups',cleanupPopups);applyHoverEvents();});function applyHoverEvents(){var $article=$('#mw-content-text');$article.off('mouseenter.RefPopups');if(userConfig.disabled){return;}if(userConfig.react!=='hover'){if(openPop){openPop.option('activateBy','click');}if(armedPop){armedPop.option('activateBy','click');}
return;}$article.on('mouseenter.RefPopups','.reference',function(){var pop=cyclePopup(this);if(pop){pop.triggerHover();}});if(openPop){openPop.option('activateBy','hover');}if(armedPop){armedPop.option('activateBy','hover');}}if(!module.lockdown){$(function($){$('#articleCategories, #catlinks').first().after($('<a href="#configure-refpopups" class="refpopups-configure-page" />').html('['+module.messages.coreConfigureText+']').click(onClickConfigure).appendTo(this));});}module.unloadCore=function(){$('#mw-content-text').off('.RefPopups');$(window).off('.RefPopups');$('a[href="#configure-refpopups"]').remove();cleanupPopups();delete this.unloadCore;};$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},userConfig));var configureIsPending=!1;function onClickConfigure(ev){ev.preventDefault();var closeFunc=function(){configureIsPending=!1;},interfaceFunc=function(confFunc){confFunc(userConfig,function(newSettings){store.set('RefPopupsJS',newSettings);
cleanupPopups();applyHoverEvents();$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},newSettings));},closeFunc);};if(configureIsPending){return;}configureIsPending=!0;if(module.configure){$.when(module.configure).done(interfaceFunc).fail(closeFunc);return;}$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'w:dev:ReferencePopups/code.configure.js'},dataType:'script',cache:!0}).then(function(){$.when(module.configure).done(interfaceFunc).fail(closeFunc);}).fail(closeFunc);}function constructPopup($ref){var frag=$ref.find('a[href^="#cite_note"]').first();if(!frag.length){return null;}var $cite=$(frag.attr('href').replace(/\./g,'\\.'));if(!$cite.length){return null;}var $content=$('<div style="overflow:auto">'),$conf=$('<a href="#" class="refpopups-configure" />').prop('title',module.messages.coreConfigureHover).click(onClickConfigure);$content.append($cite.find('.reference-text').clone());return new module.Popup({content:
$conf.add($content),activateBy:userConfig.react,hoverDelay:userConfig.hoverDelay,animation:userConfig.animate&&'fold',stickyHover:userConfig.stick,contentBoxClass:'WikiaArticle'},$ref[0]);}});;(function(){var config=mw.config.get(['wgCanonicalSpecialPageName','wgNamespaceNumber','wgUserGroups']),warning=$.storage.get('ShowHide-warning'),$elements=$('.collapsible, .NavGlobal, .NavFrame'),warningText='<a href="https://dev.fandom.com/wiki/ShowHide" title="ShowHide documentation">ShowHide</a> is no longer supported, but is $1. '+'You should consider switching your templates to MediaWiki collapsible selectors, such as <code>class="mw-collapsible"</code>. '+'See the <a href="https://community.fandom.com/wiki/Help:Collapsing" title="Collapsing help page">Collapsing help page</a> for more details.<br />'+
'<span style="font-size: smaller;">(This warning is generated by the ShowHide script and not endorsed by FANDOM in any way. Closing this notification will hide the warning for 6 months.)</span>';console.warn('[Deprecation] ShowHide is no longer supported. You should consider switching your templates to MediaWiki collapsible selectors, such as class="mw-collapsible". See https://community.fandom.com/wiki/Help:Collapsing for more details.');if($elements.length){console.warn('Elements that used by deprecated ShowHide script:',$elements);}if(window.ShowHideNoWarning){return;}if(warning&&Date.now()-warning<6*30*24*60*60*1000){return;}if(!window.ShowHideDisplayWarning||config.wgCanonicalSpecialPageName==='Recentchanges'){return;}function onClose(){$.storage.set('ShowHide-warning',Date.now());}function banner(usage){new BannerNotification(warningText.replace('$1',usage),'warn').onClose(onClose).show();}if($elements.length){banner('in use on this page');}else if([8,9,10,11].indexOf(config.
wgNamespaceNumber)>-1){banner('being imported on this wiki');}})();(function($){var config=window.ShowHideConfig=$.extend(true,{autoCollapse:2,userLang:!0,brackets:'[]',linkBefore:!1,en:{show:"show",hide:"hide",showAll:"show all",hideAll:"hide all"},be:{show:"Адкрыць",hide:"Схаваць",showAll:"Адкрыць усё",hideAll:"Схаваць усё"},cs:{show:"Zobrazit",hide:"Skrýt",showAll:"Zobrazit vše",hideAll:"Skrýt vše"},bg:{show:"Покажи",hide:"Скрий",showAll:"Покажи всички",hideAll:"Скрий всички"},de:{show:"anzeigen",hide:"verbergen",showAll:"alle anzeigen",hideAll:"alle verbergen"},es:{show:"Mostrar",hide:"Ocultar",showAll:"Mostrar todo",hideAll:"Ocultar todo"},fr:{show:"afficher",hide:"masquer",showAll:"tout afficher",hideAll:"tout masquer"},hu:{show:"kibontás",hide:"elrejtés",showAll:"összes kibontása",hideAll:"összes elrejtése"},it:{show:"Mostra",hide:"Nascondi",showAll:"Mostra tutti",hideAll:"Nascondi tutti"},ja:{
show:"表示",hide:"非表示",showAll:"すべて表示",hideAll:"すべて非表示"},ko:{show:"보이기",hide:"숨기기",showAll:"모두 보이기",hideAll:"모두 숨기기"},nl:{show:"tonen",hide:"verbergen",showAll:"alles tonen",hideAll:"alles verbergen"},pl:{show:"Pokaż",hide:"Ukryj",showAll:"Pokaż wszystko",hideAll:"Ukryj wszystko"},pt:{show:"Mostrar",hide:"Esconder",showAll:"Expandir Todos",hideAll:"Esconder Todos"},'pt-br':{show:"Mostrar",hide:"Esconder",showAll:"Expandir Todos",hideAll:"Esconder Todos"},ru:{show:"Открыть",hide:"Скрыть",showAll:"Открыть все",hideAll:"Скрыть все"},uk:{show:"Відкрити",hide:"Cховати",showAll:"Відкрити всі",hideAll:"Cховати всі"},vi:{show:"hiện",hide:"ẩn",showAll:"hiện tất cả",hideAll:"ẩn tất cả"},zh:{show:"显示",hide:"隐藏",showAll:"全部显示",hideAll:"全部隐藏"}},window.ShowHideConfig||{});function msg(name){if(config.userLang&&wgUserLanguage in
config&&name in config[wgUserLanguage]){return config[wgUserLanguage][name];}if(wgContentLanguage in config&&name in config[wgContentLanguage]){return config[wgContentLanguage][name];}return config.en[name];}$.fn.onLink=function(fn){return this.bind('click keypress',function(e){if(e.type==='click'||(e.type==='keypress'&&(e.keyCode===13||e.charCode===32))){fn.call(this,e);}});};function collapseTable(node,state){var $table=$(node),$button=$table.find('tr:first > th:last .collapseLink');if(!$table.length||!$button.length){return false;}if(typeof state==='boolean'){$table.toggleClass('collapsed',!state);}else{$table.toggleClass('collapsed');}var hidden=$table.hasClass('collapsed');$table.find('> * > tr').not(':first, .nocollapse')[hidden?"hide":"show"]();$button.text(msg(hidden?"show":"hide"));return true;}function createCollapseButtons(){var NavigationBoxes=[];$('table.collapsible').each(function(){NavigationBoxes.push(this);var $buttonLink=$('<span tabIndex=0 class=collapseLink />').
text(msg("hide")).css({cursor:"pointer"}).onLink(function(e){collapseTable($(this).closest('table'));}),$button=$("<span class=collapseButton />").css({"float":"right",textAlign:"right",fontWeight:"normal",width:"6em",marginLeft:"-100%"});$button.append(document.createTextNode(config.brackets.substr(0,config.brackets.length/2)),$buttonLink,config.brackets.substr(config.brackets.length/2));var $header=$(this).find('tr:first > th:last').prepend($button);});if($(NavigationBoxes).filter('.autocollapse').length>=config.autoCollapse){$(NavigationBoxes).filter('.autocollapse').each(function(){collapseTable(this,false);});}$(NavigationBoxes).filter('.collapsed').each(function(){collapseTable(this,false);});}$(createCollapseButtons);function toggleNavigationBar(node){var $navFrame=$(node),$navToggle=$navFrame.find('.NavHead:first .collapseLink');if(!$navFrame.length||!$navToggle.length){return false;}$navFrame.toggleClass('NavVisible');$navFrame.find('.NavPic, .NavContent').not($navFrame.find(
'.NavFrame .NavPic')).not($navFrame.find('.NavFrame .NavContent')).slideToggle();$navToggle.text(msg($navFrame.hasClass('NavVisible')?"hide":"show"));return true;}function createNavigationBarToggleButton(){var NavFrames=$('.NavFrame').addClass('NavVisible').each(function(){var $navHead=$(this).find('.NavHead:first'),$buttonLink=$('<span tabIndex=0 class=collapseLink />').text(msg("hide")).onLink(function(e){toggleNavigationBar($(this).closest('.NavFrame'));}),$button=$('<span class="NavToggle collapseButton" />');$navHead.filter('legend').append(' - ');if(config.brackets){$button.append(document.createTextNode(config.brackets.substr(0,config.brackets.length/2)),$buttonLink,config.brackets.substr(config.brackets.length/2));}else{$button.append($buttonLink);}$navHead[config.linkBefore?"prepend":"append"]($button);});if(NavFrames.length>=config.autoCollapse){NavFrames.not('.noautocollapse').each(function(){toggleNavigationBar(this);});}else{NavFrames.filter('.collapsed').each(function(){
toggleNavigationBar(this);});}return true;}$(createNavigationBarToggleButton);$(function(){$('.NavGlobal').each(function(){$('<span class=NavGlobalShow />').append(document.createTextNode('['),$('<span tabIndex=0 class=collapseLink />').text(msg("showAll")).onLink(function(e){$('.NavFrame').each(function(){if(!$(this).hasClass('NavVisible'))toggleNavigationBar(this);});}),']').appendTo(this);$(this).append(' ');$('<span class=NavGlobalHide />').append(document.createTextNode('['),$('<span tabIndex=0 class=collapseLink />').text(msg("hideAll")).onLink(function(e){$('.NavFrame').each(function(){if($(this).hasClass('NavVisible'))toggleNavigationBar(this);});}),']').appendTo(this);});});})(jQuery);;mw.hook('wikipage.content').add(function($content){$content.find('.youtubeplayer:not(.loaded)').each(function(){var $this=$(this),data=$this.data(),uri=new mw.Uri('https://www.youtube.com/embed/'),id=String(data.id||'').trim(),loop=String(data.loop||'').trim();if(id===''){console.warn(
'[YoutubePlayer] Video ID is not defined.');return;}uri.path+=id;uri.query={autoplay:window.YoutubePlayerDisableAutoplay?'0':String(data.autoplay||'').trim(),loop:loop,playlist:loop==='1'?id:'',start:String(data.start||'').trim(),list:String(data.list||'').trim()};$this.html($('<iframe>',{width:String(data.width||'').trim(),height:String(data.height||'').trim(),src:uri.toString(),allowfullscreen:'true',allow:'fullscreen'+(loop?'; autoplay':'')})).addClass('loaded');});});;;mw.loader.state({"wikia.fake.articles.7edf70cdcae74104b474e7c6262edd51":"ready"});

/* cache key: dragonage:resourceloader:filter:minify-js:7:6ba97436460dda50d2eeffc0756ee1c4 */